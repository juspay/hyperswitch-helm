# @ignored
_references:
  router:
    host: &router_host http://localhost:8080
    version: &router_version v1.117.0
  sdk:
    host: &web_sdk_host http://localhost:9050
    version: &web_sdk_version 0.126.0
    subversion: &web_sdk_subversion v1

# Global configurations
global:
  # Global image registry that can override all imageRegistry fields
  imageRegistry: &image_registry null
  image:
    registry: *image_registry
  tolerations: []
  affinity: {}

# @ignored
hyperswitch-app:
  services:
    router:
      enabled: true
      version: *router_version
      host: *router_host
    consumer:
      enabled: true
      version: *router_version
    producer:
      enabled: true
      version: *router_version
    drainer:
      enabled: true
      version: *router_version
    sdk:
      host: *web_sdk_host
      version: *web_sdk_version
      subversion: *web_sdk_subversion
  server:
    ingress:
      enabled: false
    run_env: sandbox
    keymanager:
      enabled: false
      url: ""

  drainer:
    replicas: 0

  redis:
    enabled: true

  externalRedis:
    enabled: false

  postgresql:
    enabled: true

  externalPostgresql:
    enabled: false

  initDB:
    enable: true

  istio:
    enabled: false

  argoRollouts:
    enabled: false

  autoscaling:
    enabled: true

  hyperswitch-card-vault:
    enabled: true

  externalSecretsOperator:
    enabled: false

# @ignored
hyperswitch-control-center:
  dependencies:
    router:
      host: *router_host
    sdk:
      host: *web_sdk_host
      version: *web_sdk_version
      subversion: *web_sdk_subversion
      fullUrlOverride: ""
    clickhouse:
      enabled: false

  image:
    registry: docker.juspay.io
    repository: juspaydotin/hyperswitch-control-center
    tag: v1.37.4

  ingress:
    enabled: false

  istio:
    enabled: false

# @ignored
hyperswitch-web:
  fullnameOverride: "hyperswitch-web"
  enabled: true
  sdkDemo:
    enabled: false
  image:
    pullPolicy: IfNotPresent
  podAnnotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": hook-succeeded
  autoBuild:
    enable: true
    forceBuild: true
    gitCloneParam:
      gitVersion: 0.126.0
    nginxConfig:
      extraPath: v1
    buildParam:
      envSdkUrl: *web_sdk_host
      envBackendUrl: *router_host
      envLogsUrl: http://localhost:3103
  service:
    port: 9050
  ingress:
    enabled: false

hyperswitch-monitoring:
  enabled: true
  # Pass global imageRegistry to monitoring subcharts
  global:
    tolerations: []
  # Component-specific tolerations
  kube-prometheus-stack:
    prometheus:
      prometheusSpec:
        tolerations: []
    grafana:
      tolerations: []
    alertmanager:
      alertmanagerSpec:
        tolerations: []
  loki:
    singleBinary:
      tolerations: []
  promtail:
    tolerations: []
  opentelemetry-collector:
    tolerations: []

# @ignored
hyperswitch-ucs:
  enabled: false
  fullnameOverride: "hyperswitch-ucs"
  image:
    imageRegistry: ghcr.io
    repository: juspay/connector-service
    pullPolicy: IfNotPresent
    tag: "main-b1487cb"
  imagePullSecrets: []
  nameOverride: ""

  serviceAccount:
    create: true
    annotations: {}
    name: ""

  podAnnotations: {}
  podSecurityContext: {}
  securityContext: {}

  service:
    type: ClusterIP
    grpc:
      port: 8000
      targetPort: 8000
    metrics:
      port: 8080
      targetPort: 8080

  ingress:
    enabled: false
    className: ""
    annotations: {}
    hosts:
      - host: hyperswitch-ucs.local
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls: []

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 100
    targetCPUUtilizationPercentage:
      80
      # targetMemoryUtilizationPercentage: 80

  nodeSelector: {}
  tolerations: []
  affinity: {}

  # Configuration via ConfigMap
  config:
    log:
      console:
        enabled: true
        level: "DEBUG"
        log_format: "json"
    server:
      host: "0.0.0.0"
      port: 8000
      type: "grpc"
    metrics:
      host: "0.0.0.0"
      port: 8080
    connectors:
      adyen:
        base_url: "https://{{merchant_endpoint_prefix}}-checkout-live.adyenpayments.com/checkout/"
        dispute_base_url: "https://{{merchant_endpoint_prefix}}-ca-live.adyen.com/"
      razorpay:
        base_url: "https://api.razorpay.com/"
      fiserv:
        base_url: "https://cert.api.fiservapps.com/"
      elavon:
        base_url: "https://api.convergepay.com/VirtualMerchant/"
      xendit:
        base_url: "https://api.xendit.co/"
      razorpayv2:
        base_url: "https://api.razorpay.com/"
      checkout:
        base_url: "https://api.checkout.com/"
      authorizedotnet:
        base_url: "https://api.authorize.net/xml/v1/request.api/"
    proxy:
      https_url: ""
      http_url: ""
      idle_pool_connection_timeout: 90
      bypass_proxy_urls: ["localhost", "local"]
